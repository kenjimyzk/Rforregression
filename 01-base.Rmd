---
output:
  html_document: default
  html_notebook: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, collapse=TRUE)
```

# 基本
R の基本として以下音2つがよくできている. ただし英語である.

http://tryr.codeschool.com/

https://www.datacamp.com/courses/free-introduction-to-r

また以下の日本語版のチートシートが有用である.

https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-ja.pdf

R についての動画はまず以下を見ていただきたい.

http://dotinstall.com/lessons/basic_r

日本語で合計40分くらいで13分割して配信している.
他にも Youtube にいけば他にも多数動画がある.


## 電卓としての R

R は電卓してとして使える. 
数値を扱う算術演算子として以下のものが代表的である.

演算子  | 説明          | 例
------- | ------------- | ----------
`+`     | 足し算        | `5 + 2 = 7`
`-`     | 引き算        | `5 - 2 = 3`
`*`     | 掛け算        | `5 * 2 = 10`
`/`     | 割り算        | `5 / 2 = 2.5`
`^`, `**`| べき算        | `5 ^ 2 = 25`, `5 ** 2 = 25`
`%%`     | 割り算の余り | `5 %% 2 = 1`
`%/%`     | 割り算の切り下げ  | `5 %/% 2 = 2`

```{r}
5 + 2
5 - 2
5 * 2
5 / 2
5 ^ 2
5 ** 2
5 %% 2
5 %/% 2
```

## 関数電卓としてのR
R は関数として使える. たとえば以下の関数がある.

関数    | 説明          
------- | -------------
`sqrt()`    | 平方根 $\sqrt{\cdot}$    
`exp()`     | 指数    
`log()`     | 対数    
`factorial()`     | 順列    
`choose()`     | 組み合わせ    
`abs()`     | 絶対値    
`round()`   | 四捨五入    
`floor()`   | 切り下げ    
`ceiling()` | 切り上げ    

```{r}
sqrt(10)
exp(10)
log(10)
factorial(4)
choose(4,2)
abs(-10)
round(3.5)
floor(3.5)
ceiling(3.5)
```

関数の括弧に入る数値を引数という.
組み合せを計算する関数 `choose` の引数は2つある.
複数の引数は `,` で区切る.
引数の順序は指定すれば変更可能である.
```{r}
choose(4, 2)
choose(n=4, k=2)
choose(k=2, n=4)
```
また幾つかの引数は入力しなくても. デフォルトで設定してあることがある.
それぞれの関数のヘルプを確認されたい.

関数のヘルプはコマンド `choose` の場合
```
help(choose)
?choose
```
で調べることができる.


## R の型
Rにおいて値は型 (type) をもち, 型として数値 (numeric) と文字列 (character) と論理値 (logical) など^[他にも日付 (Date) やバイナリ (raw) がある.]がある.
多くの言語と違い, あらかじめ宣言する必要なく, 自動的に決定される.

数値には整数 (integer) と, 実数をコンピュータ的に扱っている倍数精度小数 (double) など^[他にも複素数 (complex) がある.]がある.
整数か倍数精度小数かは自動的に振り分けられるが, 明示的に数字の後に `L` をつけて整数を指定することができる.

文字は `"` (ダブルクオーテーション) もしくは `'` (シングルクォーテーション) で区切られる. 
`TRUE` もしくは `FALSE` を取る値を論理値 (logical) という. 省略して `T` と `F` とあわらせることもできるが混乱するので個人的に推奨しない. 

値の型は関数 `typeof()` で確認できる.
```{r}
typeof(3)
typeof(3L)
typeof("3")
typeof(TRUE)
typeof(FALSE)
typeof(T)
typeof(F)
```

特殊な値として, 無限大を意味する `Inf`, 非数を意味する `NaN`, 欠損値を意味する `NA` , 空を意味する `NULL` がある.
`Inf` と `Nan` の型は数値として分類され, `NA` の型は論理値として分類される.
また `NULL` は `NULL` という特別な型である.
```{r}
1/0
typeof(1/0)
0/0
typeof(0/0)
typeof(NA)
typeof(NULL)
```


## 変数
値は変数 (variable) に代入することによって再利用が可能になる.
Rでは代入のことを付値 (assign) といい, 以下のように実行される.
```{r}
x <- 4 
4 -> x
x = 4
assign("x",4)
```
多くのプログラム言語では3番目のやり方をだけであるが,
R では最初のやり方を推奨している.
例えば以下を参照されたい:  
http://adv-r.had.co.nz/Style.html

代入した値を確認するには単にその変数を入力すればよい.
代入と同時に確認するには丸括弧をつけるとよい.
```{r}
x
(x<-3)
```

付値される変数として, 記号と数字からはじまらなければ, ほぼ自由に作れる.
アルファベットについて大文字と小文字が区別されることに注意されたい.
また日本語も変数に使えるが, 機種によって文字コードが違うため, 避けて使うほうが望ましい.

扱える変数は `if` などいくつか^[`break, else, FALSE, for, function, if in Inf, NA, NaN, next NULL, repeat, TRUE, while` など]はエラーになるが,
 `pi` のようにすでに組み込まれている変数も変更して指定することができる.
```{r}
pi
pi <- 3
pi
```

関数 `objects()` を使うことで，現在どんなオブジェクトがあるかを調べられる．
R は変数や関数を全てオブジェクトとして扱う言語である.
また，前に定義したオブジェクトを消す場合 `rm()` を用いる．
すでに組み込まれた変数を上書きした `pi` を削除するともとの変数が復活する.
```{r}
rm(pi)
pi
```

さらに，全てのオブジェクトを消す場合は `rm(list=ls(all=TRUE))` とすればよい．

## パッケージ
R においてパッケージを導入することによって, 機能を拡張させることができる.

パッケージ `pkg` を導入するため一度だけ以下を実行する.
```{r, eval=FALSE}
install.packages("pkg", dependencies = =TRUE)
```
とする. オプション `dependencies = =TRUE` 依存するパッケージを同時に導入してくれる.

パッケージ `pkg` が導入していれば, そのコマンド `cmd` を実行するには
```{r, eval=FALSE}
pkg::cmd
```
とパッケージとコマンドの間に `::` とする. 

もしくは `library(pkg)` もしくは `require(pkg)` 予め入力しておけば,
最初の `pkg::` を省略することができる.
なお複数のパッケージで同じ名前のコマンドがある場合,
あとで `library` もしくは `require` としたパッケージの方が優先させるので注意されたい.

